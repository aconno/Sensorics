apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-kapt'

android {
    def globalConfiguration = rootProject.extensions.getByName("ext")

    compileSdkVersion globalConfiguration["androidCompileSdkVersion"]
    buildToolsVersion globalConfiguration["androidBuildToolsVersion"]

    defaultConfig {
        minSdkVersion globalConfiguration["androidMinSdkVersion"]
        targetSdkVersion globalConfiguration["androidTargetSdkVersion"]
        versionCode globalConfiguration["sensoricsVersionCode"]
        versionName globalConfiguration["sensoricsVersionName"]
        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"

    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
        }
    }

}

repositories {
    mavenCentral()
    maven {
        url "https://repo.eclipse.org/content/repositories/paho-releases/"
    }
}

dependencies {
    implementation project(':domain')
    implementation fileTree(dir: 'libs', include: ['*.jar'])

    def dataDependencies = rootProject.ext.dataDependencies
    def testDependencies = rootProject.ext.dataTestDependencies

    implementation dataDependencies.kotlin
    implementation dataDependencies.appCompatv7
    implementation dataDependencies.timber
    implementation(dataDependencies.mqttPahoService) {
        exclude module: 'support-v4'
    }
    implementation dataDependencies.mqttPaho
    implementation dataDependencies.roomRuntime
    kapt dataDependencies.roomCompile
    implementation dataDependencies.roomRxJava2
    implementation dataDependencies.jwt
    implementation dataDependencies.rxAndroid
    implementation dataDependencies.okHttp
    implementation dataDependencies.okHttpLoggingInt
    implementation dataDependencies.javaxInject
    compileOnly dataDependencies.javaxAnnotation

    testImplementation testDependencies.kotlinJUnit
    testImplementation testDependencies.junit

    androidTestImplementation testDependencies.mockito
    androidTestImplementation testDependencies.robolectric
    androidTestImplementation testDependencies.espresso
    androidTestImplementation testDependencies.testingSupportLib
    androidTestImplementation testDependencies.testRunner
}
